# Nginx configuration for Electron auto-updates
# Add this to your nginx server block for mhuhelpline.com

# Downloads location for Electron auto-updates
location /downloads/ {
    alias /var/www/html/downloads/;
    
    # Enable directory listing for debugging (optional, can disable in production)
    autoindex off;
    
    # Set proper MIME types for update files
    types {
        application/octet-stream exe;
        application/octet-stream blockmap;
        text/yaml yml;
    }
    
    # CORS headers (needed for electron-updater)
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods 'GET, HEAD, OPTIONS';
    add_header Access-Control-Allow-Headers 'Range';
    
    # Cache control
    add_header Cache-Control "public, max-age=3600";
    
    # Support range requests (for resume downloads)
    add_header Accept-Ranges bytes;
}

# To apply this configuration:
# 1. SSH into your server
# 2. Edit nginx config: sudo nano /etc/nginx/sites-available/mhuhelpline.com
# 3. Add the above location block inside your server { } block
# 4. Create downloads directory: sudo mkdir -p /var/www/html/downloads
# 5. Set permissions: sudo chown -R www-data:www-data /var/www/html/downloads
# 6. Test config: sudo nginx -t
# 7. Reload nginx: sudo systemctl reload nginx


root@ip-172-31-27-173:~# cat /etc/asterisk/pjsip.conf
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
local_net=172.31.0.0/16
external_media_address=65.1.149.92
external_signaling_address=65.1.149.92

[transport-ws]
type=transport
protocol=ws
bind=0.0.0.0:8088
external_media_address=65.1.149.92
external_signaling_address=65.1.149.92
;allow_reload=yes

;[1001-identify](!)
;type=identify
;endpoint=1001
;match=102.222.68.196

;[global] ;Global kept bringing errors
;type=global
;user_agent=Asterisk PBX ;Causing errors in asterisk 20
;max_forwards=70 ; Failed with errors. Leaving asterisk to use defaults
;keep_alive_interval=120

;[system] ;Kept returning errors 
;type=system
;timer_t1=500
;timer_b=32000
;compact_headers=no
;threadpool_idle_timeout=10  ; Asterisk 20 specific
;threadpool_initial_size=0   ; Let Asterisk manage this
;threadpool_max_size=50      ; Asterisk 20 recommended

;[endpoint-template](!)
;type=endpoint
;context=from-internal
;disallow=all
;allow=ulaw,alaw
;direct_media=no
;force_rport=yes
;rewrite_contact=yes
;rtp_symmetric=yes
;ice_support=no
;dtls_verify=no
;dtls_setup=actpass
;media_encryption=no
;transport=transport-ws
;identify_by=auth_username
;send_rpid=yes
;timers_sess_expires=1800
;from_domain=65.1.149.92

;nat=yes
root@ip-172-31-27-173:~# cat /etc/asterisk/res_odbc.conf 
;;; odbc setup file

; ENV is a global set of environmental variables that will get set.
; Note that all environmental variables can be seen by all connections,
; so you can't have different values for different connections.
[ENV]
;INFORMIXSERVER => my_special_database
;INFORMIXDIR => /opt/informix
;ORACLE_HOME => /home/oracle

; All other sections are arbitrary names for database connections.

;
; The context name is what will be used in other configuration files, such
; as extconfig.conf and func_odbc.conf, to reference this connection.
[asterisk]
;
; Permit disabling sections without needing to comment them out.
; If not specified, it is assumed the section is enabled.
enabled => no
;
; This value should match an entry in /etc/odbc.ini
; (or /usr/local/etc/odbc.ini, on FreeBSD and similar systems).
dsn => asterisk
;
; Username for connecting to the database.  The user defaults to the context name if unspecified.
;username => myuser
;
; Password for authenticating the user to the database.  The default
; password is blank.
;password => mypass
;
; Build a connection at startup?
pre-connect => yes
;
; What should we execute to ensure that our connection is still alive?  The
; statement should return a non-zero value in the first field of its first
; record.  The default is "select 1".
;sanitysql => select 1
;
; The maximum number of connections to have open at any given time.
; This defaults to 1 and it is highly recommended to only set this higher
; if using a version of UnixODBC greater than 2.3.1.
;max_connections => 20
;
; When the channel is destroyed, should any uncommitted open transactions
; automatically be committed?
;forcecommit => no
;
; How should we perceive data in other transactions within the database?
; Possible values are read_uncommitted, read_committed, repeatable_read,
; and serializable.  The default is read_committed.
;isolation => repeatable_read
;
; Is the backslash a native escape character?  The default is yes, but for
; MS SQL Server, the answer is no.
;backslash_is_escape => yes
;
; How long (in seconds) should we attempt to connect before considering the
; connection dead?  The default is 10 seconds, but you may wish to reduce it,
; to increase responsiveness.
;connect_timeout => 10
;
; When a connection fails, how long (in seconds) should we cache that
; information before we attempt another connection?  This increases
; responsiveness, when a database resource is not working.
;negative_connection_cache => 300
;
; Enable query logging. This keeps track of the number of prepared queries
; and executed queries as well as the query that has taken the longest to
; execute. This can be useful for determining the latency with a database.
; The data can be viewed using the "odbc show" CLI command.
; Note that only successful queries are logged currently.
;logging => yes
;
; Slow query limit. If a query exceeds the given amount of time (in milliseconds)
; when executing then a WARNING message will be output to indicate that there
; may be a problem. Note that logging must be set to "yes" for this to occur. By
; default this is set to 5000 milliseconds (or 5 seconds). If you would like to
; disable the WARNING message it can be set to "0".
;slow_query_limit => 5000


[asterisk-connector]
enabled => yes
dsn => asterisk-connector
username => mayday_user
password => Pasword@256
pre-connect => yes
;pooling => no
;share_connections => yes ;allows multiple connections to share the same db
max_connections => 20
connect_timeout => 10
debug => yes
loguniqueid => yes

[mysql2]
enabled => no
dsn => MySQL-asterisk
username => myuser
password => mypass
pre-connect => yes

; Certain servers, such as MS SQL Server and Sybase use the TDS protocol, which
; limits the number of active queries per connection to 1.
[sqlserver]
enabled => no
dsn => mickeysoft
max_connections => 5
username => oscar
password => thegrouch
pre-connect => yes
sanitysql => select count(*) from systables
; forcecommit => no            ; Default to committing uncommitted transactions?
                               ; Note:  this is NOT the autocommit flag; this
                               ; determines the end result of transactions which
                               ; are not explicitly committed or rolled back.  By
                               ; default, such transactions are rolled back if the
                               ; call ends without an explicit commit.
; isolation => read_committed  ; Isolation level; supported levels are:
                               ; read_uncommitted, read_committed, repeatable_read,
                               ; serializable.  Note that not all databases support
                               ; all isolation levels (e.g. Postgres only supports
                               ; repeatable_read and serializable).  See database
                               ; documentation for further information.
;
; Many databases have a default of '\' to escape special characters.  MS SQL
; Server does not.
backslash_is_escape => no

;
; If you are having problems with concurrency, please read this note from the
; mailing lists, regarding UnixODBC:
;
; http://lists.digium.com/pipermail/asterisk-dev/2009-February/036539.html
;
; In summary, try setting "Threading=2" in the relevant section within your
; odbcinst.ini.
;
root@ip-172-31-27-173:~# cat /etc/asterisk/sorcery.conf 
; Sample configuration file for Sorcery Data Access Layer

;
; Wizards
;
; Wizards are the persistence mechanism for objects. They are loaded as Asterisk modules and register
; themselves with the sorcery core. All implementation specific details of how objects are persisted is isolated
; within wizards.
;

;
; Caching
;
; A wizard can optionally be marked as an object cache by adding "/cache" to the object type within the mapping.
; If an object is returned from a non-object cache it is immediately given to the cache to be created. Multiple
; object caches can be configured for a single object type.
;

;
; Object Type Mappings
;
; To allow configuration of where and how an object is persisted object mappings can be defined within this file
; on a per-module basis. The mapping consists of the object type, options, wizard name, and wizard configuration
; data. This has the following format:
;
; object type [/options] = wizard name, wizard configuration data
;
; For example to configure an in-memory wizard for the 'bob' object type:
;
; bob = memory
;
; Or to configure the object type 'joe' from a configuration file:
;
; joe = config,joe.conf
;
; Note that an object type can have multiple mappings defined. Each mapping will be consulted in the order in which
; it appears within the configuration file. This means that if you are configuring a wizard as a cache it should
; appear as the first mapping so the cache is consulted before all other mappings.
;

;
; The following object mappings are used by the unit test to test certain functionality of sorcery.
;

;[res_pjsip]
;endpoint=config,pjsip.conf,criteria=type=endpoint
;endpoint=realtime,ps_endpoints

;auth=config,pjsip.conf,criteria=type=auth
;auth=realtime,ps_auths

;aor=config,pjsip.conf,criteria=type=aor
;aor=realtime,ps_aors

;[res_pjsip_endpoint_identifier_ip]
;identify=realtime,ps_endpoint_id_ips

[res_pjsip]
endpoint=realtime,ps_endpoints
auth=realtime,ps_auths
aor=realtime,ps_aors
contact=realtime,ps_contacts
transport=realtime,ps_transports
;transport=config,pjsip.conf  ;#Keep transport in config file
;identify=realtime,ps_endpoint_id_ips

[res_pjsip_endpoint_identifier_ip]
endpoint_identifier_ip=realtime,ps_endpoint_id_ips

;[res_pjsip_endpoint_identifier_ip]
;identify=realtime,ps_endpoint_id_ips


[res_pjsip_registrar]
registration=realtime,ps_registrations

;[test_sorcery_section]
;test=memory

;[test_sorcery_cache]
;test/cache=test
;test=memory

;
; The following object mapping is the default mapping of external MWI mailbox
; objects to give persistence to the message counts.
;
;[res_mwi_external]
;mailboxes=astdb,mwi_external

;
; The following object mappings set PJSIP objects to use realtime database mappings from extconfig
; with the table names used when automatically generating configuration from the alembic script.
;


; Add these sections
;[res_pjsip_outbound_registration]
;registration=realtime,ps_registrations

;[res_pjsip_pubsub]
;resource_list=realtime,ps_resource_lists

;[res_pjsip]
;endpoint=realtime,ps_endpoints
;auth=realtime,ps_auths
;aor=realtime,ps_aors
;domain_alias=realtime,ps_domain_aliases

;[res_pjsip_endpoint_identifier_ip]
;identify=realtime,ps_endpoint_id_ips

;[res_pjsip_outbound_publish]
;outbound-publish=realtime,ps_outbound_publishes

;[res_pjsip_pubsub]
;inbound-publication=realtime,ps_inbound_publications

;[res_pjsip_publish_asterisk]
;asterisk-publication=realtime,ps_asterisk_publications

;[res_stir_shaken]
;tn=realtime,stir_tn
root@ip-172-31-27-173:~# cat /etc/asterisk/manager.conf 
;
; AMI - The Asterisk Manager Interface
;
; Third party application call management support and PBX event supervision
;
; Use the "manager show commands" at the CLI to list available manager commands
; and their authorization levels.
;
; "manager show command <command>" will show a help text.
;
; ---------------------------- SECURITY NOTE -------------------------------
; Note that you should not enable the AMI on a public IP address. If needed,
; block this TCP port with iptables (or another FW software) and reach it
; with IPsec, SSH, or SSL vpn tunnel.  You can also make the manager
; interface available over http/https if Asterisk's http server is enabled in
; http.conf and if both "enabled" and "webenabled" are set to yes in
; this file.  Both default to no.  httptimeout provides the maximum
; timeout in seconds before a web based session is discarded.  The
; default is 60 seconds.
;
[general]
enabled = yes
;webenabled = yes

port = 5038
bindaddr = 0.0.0.0

[mayday_ami_user]
secret = mayday_ami_password
deny = 0.0.0.0/0
permit = 0.0.0.0/0
;permit=65.1.149.92/255.255.255.255
read = all
write = all

; Parameters that control AMI over TLS. ("enabled" must be set too).
; You can open a connection to this socket with e.g.
;
;	openssl s_client -connect my_host:5039
;
;tlsenable=no		; set to YES to enable it
;tlsbindaddr=0.0.0.0:5039		; address and port to bind to, default to bindaddr and port 5039
;tlscertfile=/tmp/asterisk.pem	; path to the certificate.
;tlsprivatekey=/tmp/private.pem ; path to the private key, if no private given,
                                ; if no tlsprivatekey is given, default is to search
								; tlscertfile for private key.
;tlscipher=<cipher string>      ; string specifying which SSL ciphers to use or not use
;
;allowmultiplelogin = yes		; IF set to no, rejects manager logins that are already in use.
;                               ; The default is yes.
;
;displayconnects = yes
;
; Add a Unix epoch timestamp to events (not action responses)
;
;timestampevents = yes

;brokeneventsaction = yes   ; Restore previous behavior that caused the events
                            ; action to not return a response in certain
                            ; circumstances.  Defaults to 'no'.

;
; Display certain channel variables every time a channel-oriented
; event is emitted:
;
; Note that this does incur a performance penalty and should be avoided if possible.
;
;channelvars = var1,var2,var3

; debug = on	; enable some debugging info in AMI messages (default off).
		; Also accessible through the "manager debug" CLI command.

; authtimeout specifies the maximum number of seconds a client has to
; authenticate.  If the client does not authenticate beofre this timeout
; expires, the client will be disconnected. (default: 30 seconds)

;authtimeout = 30

; authlimit specifies the maximum number of unauthenticated sessions that will
; be allowed to connect at any given time.

;authlimit = 50

;httptimeout = 60
; a) httptimeout sets the Max-Age of the http cookie
; b) httptimeout is the amount of time the webserver waits
;    on a action=waitevent request (actually its httptimeout-10)
; c) httptimeout is also the amount of time the webserver keeps
;    a http session alive after completing a successful action
;
; disabledevents specifies AMI events which should be completely globally disabled.
; These events will not be available to any AMI listeners. Use this to disable
; frequent events which are not desired for any listeners. Default
; is no events are globally disabled. Event names are case-sensitive.
; Events disabled in stasis.conf do not also need to be disabled here.
; If you don't want to completely disable an AMI event, also consider the
; filter option available on a per-manager user basis to block unwanted
; events from being received in a stream (as opposed to this option which
; would prevent specified events from being generated at all).

;disabledevents = Newexten,Varset

;[mark]
;secret = mysecret
;deny=0.0.0.0/0.0.0.0
;permit=209.16.236.73/255.255.255.0
;acl=named_acl_example               ; use a named ACL from acl.conf
;
;
;setvar=PBXACCOUNT=edvina
; The setvar option defines channel variables that will be set when this account
; originates a call. You can define multiple setvar= commands for one manager
; user.
;

;--
-- eventfilter --------------------------------------------------------
Include and/or exclude events for this user.

There are two ways to use this feature... Legacy and Advanced.

Legacy Event Filtering:

This is the original method of filtering events.  It's no longer
recommended but still supported for backwards compatibility.  The filter
is a regular expression, optionally prefixed with an exclamation point (!).
The regular expression is applied to the entire payload of every event.
If any part of the event payload matches, the event is included.  If the
first character of the filter is an exclamation point (!), the event is
excluded. On a busy system, this is a resource intensive process and the
reason it's no longer recommended.

Another issue with legacy filtering is that regexes are very sensitive to
whitespace and separators.  "Event:Newchannel" will NOT work because of
the missing space after the ':'.  Neither will "Event:  Newchannel" or
"Event Newchannel" because of the extra space in the first expression
and the missing ':' in the second.

Advanced Event Filtering:

Advanced filtering still allows you to use regular expressions but adds
the ability to pre-select certain events and constrain the regular
expression to matching the contents of a specific event header.
The syntax is:

eventfilter(<match_criteria>) = [ <match_expression> ]

<match_criteria> : [ action(include|exclude) | name(<event_name>) |
    header(<header_name>) | method(<match_method>) ][, ...]

You can specify at most one of each of the following in any order,
separated by commas.

    action(include|exclude): Default: 'include'. Instead of using '!' to
    exclude matching events, specify 'action(exclude)'.  Although the
    default is "include" if "action" isn't specified, adding
    "action(include)" will help with readability.

    name(<event_name>): Include only events with a name exactly matching
    <event_name>.  This is actually implemented using the "hash" of the
    event names and is therefore much more efficient than using a regular
    expression.

    header(<header_name>): Include only events that have a header exactly
    matching <header_name>.  Additionally, the data to be searched will
    be constrained to the value of this header instead of the entire
    event payload.

    method(regex | exact | starts_with | ends_with | contains | none ):
    How should <match_expression> be applied to the event data?  The data may
    be the entire event payload or, if header(<header_name>) was used, the
    value of that specific header.  If 'action(exclude)' was specified, a
    "match" here will cause the event to be excluded instead of included.

        regex:  As a regular expression that, if matched anywhere in the
        data, constitutes a match.

        exact: As a simple string that must match all of the data.
        Probably only useful when the data is constrained to a specific header
        and the data itself is a simple value.

        starts_with: As a simple string that, if found at the beginning of the
        data, constitutes a match.

        ends_with: As a simple string that, if found at the end of the data,
        constitutes a match.

        contains: As a simple string that, if found anywhere in the data,
        constitutes a match.

        none: Ignore <match_expression> altogether.  This is the default
        because the majority of use cases for event filtering involve
        including or excluding events by event name without regard to the
        event payload.  In this case, you can just leave <match_expression>
        empty.

  TIP:  Although match criteria order doesn't matter to Asterisk, using the
  order shown can help you read them.  For instance...
  eventfilter(action(exclude),name(Newchannel),header(Channel),method(starts_with)) = Local/
  ...means "Exclude Newchannel events with a Channel header that starts with Local/"

Event Filter Processing Ordering:

Both Legacy and Advanced filter entries are processed as follows:
 - If no filters are configured, all events are reported as normal.

 - If there are 'include' filters only, an event that matches ANY filter
   will be reported.

 - If there are 'exclude' filters only, an event that matched ANY filter
   will be excluded.

 - If there are both 'include' and 'exclude' filters, all 'include' filters
   are matched first, then the 'exclude' filters will be applied to the
   resulting set.
--;

; ----- Legacy Filter Examples:
; Every legacy filter expression results in regular expression matching
; on the entire payload of every event even if no regular expression
; meta-characters were used.

; Only include Newchannel events
;eventfilter=Event: Newchannel

; Only include events of any type with a "Channel" header that matches
; the regular expression.
;eventfilter=Channel: (PJ)?SIP/(james|jim|john)-

; Only include Newchannel events which contain a "Channel" header
; for PJSIP channels.
;eventfilter = Event: Newchannel.*Channel: PJSIP/

; Only include Newchannel or Hangup events whose "Channel" header doesn't start
; with Local/.  All other events are filtered out.
;eventfilter = Event: Newchannel
;eventfilter = Event: Hangup
;eventfilter = !Channel: Local/
; This causes three regexes to be searched for on every event!

; Include ALL events EXCEPT Newchannel and Hangup events whose "Channel" header
; starts with Local/.
; Other Newchannel and Hangup events ARE reported.
;eventfilter = !Event: (Newchannel|Hangup).*Channel: Local/
; This causes one regex to be searched for but it's a fairly expensive
; one.

; Exclude any event that has a "Channel" header whose value starts with "DADHI/"
;eventfilter=!Channel: DAHDI/

; ----- Advanced Filter Examples:
; All of these examples are WAY more efficient than their legacy
; equivalents.

; Include only "Newchannel" events.
; eventfilter(name(Newchannel)) =
; Note that there's nothing to the right of the '=' because you don't care
; what's in the payload.  You still need the '=' though or the config file
; parser will complain.  'action(include)' and 'method(none)' are implied.

; Only include events of any type with a "Channel" header that matches
; the regular expression.
;eventfilter(action(include),header(Channel),method(regex)) = (PJ)?SIP/(james|jim|john)-
; We're still testing every event but because we only apply the regex to the
; value of the Channel header this is still more efficient than using the
; legacy method.

; Only include Newchannel and Hangup events whose "Channel" header doesn't
; start with Local/.
;eventfilter(action(include),name(Newchannel)) =
;eventfilter(action(include),name(Hangup)) =
;eventfilter(header(Channel),action(exclude),method(starts_with)) = Local/
; No regexes at all.  We do the hash match against the event names first and
; only matching events are passed to the next filter.
; Then, in only those events, we look for a Channel header by exact match, then
; look for 'Local/' at the beginning of its value.

; Include ALL events EXCEPT Newchannel and Hangup events whose "Channel" header
; starts with Local/.
; Other Newchannel and Hangup events ARE reported.
;eventfilter(action(exclude),name(Newchannel),header(Channel),method(starts_with)) = Local/
;eventfilter(action(exclude),name(Hangup),header(Channel),method(starts_with)) = Local/
; Again, no regexes. Very efficient because the filters start by looking for
; a hash match on the event name.

; Exclude any event that has a "Channel" header whose value starts with "DADHI/"
;eventfilter(action(exclude),header(Channel),method(starts_with)) = DAHDI/
; We're still testing every event but there are no regexes involved at all.

;--
-- eventfilter end ----------------------------------------------------
--;

;
; If the device connected via this user accepts input slowly,
; the timeout for writes to it can be increased to keep it
; from being disconnected (value is in milliseconds)
;
; writetimeout = 100
;
;displayconnects = yes	; Display on CLI user login/logoff
;
; Authorization for various classes
;
; Read authorization permits you to receive asynchronous events, in general.
; Write authorization permits you to send commands and get back responses.  The
; following classes exist:
;
; all       - All event classes below (including any we may have missed).
; system    - General information about the system and ability to run system
;             management commands, such as Shutdown, Restart, and Reload. This
;             class also includes dialplan manipulation actions such as
;             DialplanExtensionAdd and DialplanExtensionRemove.
; call      - Information about channels and ability to set information in a
;             running channel.
; log       - Logging information.  Read-only. (Defined but not yet used.)
; verbose   - Verbose information.  Read-only. (Defined but not yet used.)
; agent     - Information about queues and agents and ability to add queue
;             members to a queue.
; user      - Permission to send and receive UserEvent.
; config    - Ability to read and write configuration files.
; command   - Permission to run CLI commands.  Write-only.
; dtmf      - Receive DTMF events.  Read-only.
; reporting - Ability to get information about the system.
; cdr       - Output of cdr_manager, if loaded.  Read-only.
; dialplan  - Receive NewExten and VarSet events.  Read-only.
; originate - Permission to originate new calls.  Write-only.
; agi       - Output AGI commands executed.  Input AGI command to execute.
; cc        - Call Completion events.  Read-only.
; aoc       - Permission to send Advice Of Charge messages and receive Advice
;           - Of Charge events.
; test      - Ability to read TestEvent notifications sent to the Asterisk Test
;             Suite.  Note that this is only enabled when the TEST_FRAMEWORK
;             compiler flag is defined.
; security  - Security Events.  Read-only.
; message   - Permissions to send out of call messages. Write-only
;
;read = system,call,log,verbose,agent,user,config,dtmf,reporting,cdr,dialplan
;write = system,call,agent,user,config,command,reporting,originate,message
root@ip-172-31-27-173:~# cat /etc/asterisk/extconfig.conf 
;
; Static and realtime external configuration
; engine configuration
;
; See https://docs.asterisk.org/Fundamentals/Asterisk-Configuration/Database-Support-Configuration/Realtime-Database-Configuration/
; for basic table formatting information.
;
[settings]
ps_endpoints => odbc,asterisk-connector
ps_auths => odbc,asterisk-connector
ps_aors => odbc,asterisk-connector
ps_contacts => odbc,asterisk-connector
ps_endpoint_id_ips => odbc,asterisk-connector
ps_transports => odbc,asterisk-connector


;
; Static configuration files:
;
; file.conf => driver,database[,table[,priority]]
;
; maps a particular configuration file to the given
; database driver, database and table (or uses the
; name of the file as the table if not specified)
;
; Uncomment to load queues.conf via the odbc engine.
;
;queues.conf => odbc,asterisk,ast_config
;extensions.conf => sqlite,asterisk,ast_config
;
; The following files CANNOT be loaded from Realtime storage:
;	asterisk.conf
;	extconfig.conf (this file)
;	logger.conf
;
; Additionally, the following files cannot be loaded from
; Realtime storage unless the storage driver is loaded
; early using 'preload' statements in modules.conf:
;	manager.conf
;	cdr.conf
;	rtp.conf
;
; Named ACLs specified in realtime also can not be used
; from manager.conf unless the storage driver is preloaded.
; Attempting to use a realtime stored named ACL before the
; driver is loaded will result in an invalid ACL which
; rejects all addresses.
;
; Realtime configuration engine
;
; maps a particular family of realtime
; configuration to a given database driver,
; database and table (or uses the name of
; the family if the table is not specified
;
;example => odbc,asterisk,alttable,1
;example => mysql,asterisk,alttable,2
;example2 => ldap,"dc=oxymium,dc=net",example2
;
; Additionally, priorities are now supported for use as failover methods
; for retrieving realtime data.  If one connection fails to retrieve any
; information, the next sequential priority will be tried next.  This
; especially works well with ODBC connections, since res_odbc now caches
; when connection failures occur and prevents immediately retrying those
; connections until after a specified timeout.  Note:  priorities must
; start at 1 and be sequential (i.e. if you have only priorities 1, 2,
; and 4, then 4 will be ignored, because there is no 3).
;
;
; Possible driver backends:
;
; "odbc" is shown in the examples below, but is not the only valid realtime
; engine.  Here are several of the possible options:
;    odbc ... res_config_odbc
;    sqlite3 ... res_config_sqlite3
;    pgsql ... res_config_pgsql
;    curl ... res_config_curl
;    ldap ... res_config_ldap
;    mysql ... res_config_mysql (available via add-ons in menuselect)
;
; Note: The res_config_pgsql backend configures the database used in their
; respective configuration files and ignore the database name configured in
; this file.
;
;iaxusers => odbc,asterisk
;iaxpeers => odbc,asterisk
;sippeers => odbc,asterisk
;sipregs => odbc,asterisk ; (avoid sipregs if possible, e.g. by using a view)
;ps_endpoints => odbc,asterisk
;ps_auths => odbc,asterisk
;ps_aors => odbc,asterisk
;ps_domain_aliases => odbc,asterisk
;ps_endpoint_id_ips => odbc,asterisk
;ps_outbound_publishes => odbc,asterisk
;ps_inbound_publications = odbc,asterisk
;ps_asterisk_publications = odbc,asterisk
;stir_tn => odbc,asterisk
;voicemail => odbc,asterisk
;extensions => odbc,asterisk
;meetme => mysql,general
;queues => odbc,asterisk
;queue_members => odbc,asterisk
;queue_rules => odbc,asterisk
;acls => odbc,asterisk
;musiconhold => mysql,general
;musiconhold_entry => mysql,general
;queue_log => mysql,general
;
;
; While most dynamic realtime engines are automatically used when defined in
; this file, 'extensions', distinctively, is not.  To activate dynamic realtime
; extensions, you must turn them on in each respective context within
; extensions.conf with a switch statement.  The syntax is:
;      switch => Realtime/[[db_context@]tablename]/<opts>
; The only option available currently is the 'p' option, which disallows
; extension pattern queries to the database.  If you have no patterns defined
; in a particular context, this will save quite a bit of CPU time.  However,
; note that using dynamic realtime extensions is not recommended anymore as a
; best practice; instead, you should consider writing a static dialplan with
; proper data abstraction via a tool like func_odbc.
root@ip-172-31-27-173:~# cat /etc/asterisk/modules.conf 
;
; Asterisk configuration file
;
; Module Loader configuration file
;

[modules]
autoload=yes

; Core realtime and sorcery (load first)
;preload => res_odbc.so
;preload => res_config_odbc.so
;preload => res_sorcery.so
;preload => res_sorcery_config.so
;preload => res_sorcery_realtime.so

; ARI Stack
;preload => http.so
;preload => res_http_websocket.so
;preload => res_stasis.so
;preload => res_ari.so
;preload => res_ari_model.so
;preload => res_ari_applications.so
;preload => res_ari_asterisk.so
;preload => res_ari_bridges.so
;preload => res_ari_channels.so
;preload => res_ari_endpoints.so
;preload => res_ari_events.so
;preload => res_ari_recordings.so
;preload => res_ari_sounds.so

; PJSIP Stack
;preload => res_pjproject.so
;preload => res_pjsip.so
;preload => res_pjsip_session.so
;preload => chan_pjsip.so
;preload => res_pjsip_transport_websocket.so
noload => app_voicemail.so
noload => app_voicemail_imap.so
load => app_voicemail_odbc.so
noload => chan_sip.so
noload => res_config_pgsql.so
noload => res_config_ldap.so
noload => res_config_sqlite.so
noload => cdr_radius.so
noload => cel_radius.sonoload = res_hep.so
noload => res_hep_pjsip.so
noload => res_hep_rtcp.so

noload => chan_alsa.so
noload => chan_console.so

;
; Any modules that need to be loaded before the Asterisk core has been
; initialized (just after the logger initialization) can be loaded
; using 'preload'.  'preload' forces a module and the modules it
; is known to depend upon to be loaded earlier than they normally get
; loaded.
;
; NOTE: There is no good reason left to use 'preload' anymore.  It was
; historically required to preload realtime driver modules so you could
; map Asterisk core configuration files to Realtime storage.
; This is no longer needed.
;
;preload = your_special_module.so
;
; If you want Asterisk to fail if a module does not load, then use
; the "require" keyword. Asterisk will exit with a status code of 2
; if a required module does not load.
;
;require = chan_pjsip.so
;
; If you want you can combine with preload
; preload-require = your_special_module.so
;
;load = res_musiconhold.so
;
; Load one of: alsa, or console (portaudio).
; By default, load chan_console only (automatically).
;
;noload = chan_alsa.so
;noload = chan_console.so
;
; Do not load res_hep and kin unless you are using HEP monitoring
; <http://sipcapture.org> in your network.
;
noload => res_hep.so
;noload = res_hep_pjsip.so
;noload = res_hep_rtcp.so
;
; Do not load chan_sip by default, it may conflict with res_pjsip.
;noload = chan_sip.so
;
; Load one of the voicemail modules as they are mutually exclusive.
; By default, load app_voicemail only (automatically).
;
;noload = app_voicemail.so
;noload = app_voicemail_imap.so
;noload = app_voicemail_odbc.so
root@ip-172-31-27-173:~# cat /etc/odbc.ini 
[asterisk-connector]
Description = MariaDB connection to asterisk database
Driver = MariaDB
Database = asterisk
Server = localhost
Port = 3306
Username = mayday_user
Password = Pasword@256
Option = 3
Charset = utf8
root@ip-172-31-27-173:~# cat /etc/odbcinst.ini 
[MariaDB]
Description = MariaDB Connector/ODBC v.3.1
Driver = /usr/lib/aarch64-linux-gnu/odbc/libmaodbc.so
Setup = /usr/lib/aarch64-linux-gnu/odbc/libmaodbc.so
FileUsage = 1
Threading = 2
root@ip-172-31-27-173:~# 
